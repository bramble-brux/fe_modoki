# 作業管理タイマー 要件定義書 - v1.7.0

## 1. 概要
「１５分チェンジ法」（参考: [Ixyブログ](https://ixy.blog.jp/archives/2366349.html)）に基づく集中力管理アプリ。
「好きなこと（Free）」と「やるべきこと（Work）」を交互に繰り返し、自然な集中状態へ導く。

## 2. タイマーモード

### 2.1 共通仕様
- 目標時間からの**カウントダウン方式**（0:00で停止または超過計測）。
- 起動時に「Work（ダンベル）」または「Free（コントローラー）」を選択して開始。
- ボタンは常に**1つだけ**（STOP）。押すと反対モードに切り替わり自動スタート。
- デザインは Apple システムカラー（Indigo, Mint, Red, Green）に準拠。

### 2.2 仕事モード (Work)
- 目標時間を超過しても**停止せず延長計測**（カウントアップ表示）。
- 延長時はタイムおよびアイコン・ラベルが**グリーン（Success色）**に変化。
- 目標到達時のアラートは設定により制御（デフォルトは一度のみ）。

### 2.3 自由モード (Free)
- 目標時間に達すると**0:00で停止**。
- 停止後、反対モードに切り替えるまで**アラート（赤色表示）が鳴り続ける**。

## 3. 自動移行・操作
- **ワンタップ移行**: STOPボタンを押すとセッションを記録し、自動で反対モードへ移行。
- **バックグラウンド継続**: アプリを閉じても（バックグラウンドに回っても）時間は正しく進み、目標時間に達すると通知が届く。復帰時に経過時間が自動補正される。
- **ロック画面対応**: バックグラウンド時やアラート発生時に通知を表示。通知内の「STOP / 次へ」ボタンからロックを解除せずに移行可能。

## 4. 記録・履歴
- セッション終了時（手動終了）に、今回の Work 合計時間を表示。
- モード切替時にセッションを自動記録。過去50件の閲覧・削除が可能。

## 5. 設定（永続化）
- Work / Free の目標時間、および Work 目標到達時のアラートON/OFF。
- 全設定は `AppStorage` で永続化。
